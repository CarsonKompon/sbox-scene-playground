@using Home;
@using Sandbox;
@using Sandbox.UI;
@attribute [Title( "Home Pause Menu" )]
@attribute [Category( "Home - UI" )]
@attribute [Icon( "pause", "red", "white" )]
@inherits PanelComponent

@namespace Home.UI

<root>

    <div class="left">
        <div class="logo">
            <img src="ui/ui_roof.png" class="roof" />
            <p class="title">Home</p>
            <p class="subtitle">by Carson Kompon</p>
        </div>

        <div class="menu-options">

            <button><i>apartment</i>Plaza</button>
            <button><i>door_front</i>Room</button>
            <div class="divider" />
            <button><i>person</i>Customization</button>
            <button><i>settings</i>Options</button>
            <button><i>logout</i>Quit</button>

        </div>
    </div>

    <div class="player-info">
		<div class="top">
			@if(LocalPlayer?.Data?.SteamId != null)
			{
				<img src="@($"avatar:{LocalPlayer?.Data?.SteamId ?? 1}")" class="avatar" />
			}
			<div class="info">
				<p class="name">@(LocalPlayer?.Data?.Name ?? "")</p>
				<p class="money">@(HomeUtils.FormatMoney(LocalPlayer?.Data?.Money ?? 0))</p>
			</div>
		</div>
		<div class="divider" />
		<div class="bottom">
			<div class="stats">
				<p class="stat">Started Playing: @(HomeUtils.UnixTimeStampToDateTime(LocalPlayer?.Data?.Playtime?.StartedPlaying ?? 0).ToString("MM-dd-yyyy"))</p>
				<p class="stat">Hours Played: @((LocalPlayer?.Data?.Playtime?.MinutesPlayed ?? 0))</p>
			</div>
		</div>
    </div>

</root>

@code
{
	public bool IsOpen = false;

	HomePlayer LocalPlayer
	{
		get
		{
			if ( _localPlayer == null )
				_localPlayer = HomePlayer.Local;

			return _localPlayer;
		}
	}
	HomePlayer _localPlayer;

	public override void Update()
	{
		if(Input.EscapePressed)
		{
			IsOpen = !IsOpen;
		}

		SetClass("hidden", !IsOpen);
	}

	protected override int BuildHash() => System.HashCode.Combine( IsOpen );
}